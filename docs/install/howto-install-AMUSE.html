

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installation of the AMUSE software &mdash; AMUSE 12.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Getting started with AMUSE" href="getting-started.html" />
    <link rel="prev" title="Installing on Suse Linux" href="install-prerequisites-suse.html" />
     
    <link rel="stylesheet" href="../_static/default.css" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AMUSE
          

          
          </a>

          
            
            
              <div class="version">
                12.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="howto-obtain-AMUSE.html">Obtaining AMUSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto-install-prerequisites.html">Installation of the prerequisite software</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Installation of the AMUSE software</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-the-code">Configuring the code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-the-code">Building the code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-the-build">Testing the build</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#real-time-testing">Real-time testing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-code">Running the code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html">Getting started with AMUSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuring AMUSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="documenting.html">Writing documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive_tutorial/index.html">Interactive tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AMUSE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Installation</a> &raquo;</li>
        
      <li>Installation of the AMUSE software</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/install/howto-install-AMUSE.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installation-of-the-amuse-software">
<h1>Installation of the AMUSE software<a class="headerlink" href="#installation-of-the-amuse-software" title="Permalink to this headline">¶</a></h1>
<p>Before installing AMUSE the prerequisite software must be downloaded and
installed, see <a class="reference internal" href="howto-install-prerequisites.html#prerequisite-label"><span class="std std-ref">Installation of the prerequisite software</span></a>.</p>
<p>In the current stage of development AMUSE will not be installed in
the python <code class="docutils literal notranslate"><span class="pre">site-packages</span></code> library. Instead, all code is build
in the AMUSE source directories. With this setup we can easily edit
the code and run it, without the need for an extra installation step.</p>
<div class="section" id="configuring-the-code">
<h2>Configuring the code<a class="headerlink" href="#configuring-the-code" title="Permalink to this headline">¶</a></h2>
<p>The code is configured using the <code class="docutils literal notranslate"><span class="pre">configure</span></code> command.
Before building the code, run ‘configure’ in the AMUSE
root directory.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; ./configure
</pre></div>
</div>
<p>The ‘configure’ script will check for all prerequisite software
and report if any are missing.</p>
</div>
<div class="section" id="building-the-code">
<h2>Building the code<a class="headerlink" href="#building-the-code" title="Permalink to this headline">¶</a></h2>
<p>The code is build using a  <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>. To build the code run ‘make’
in the AMUSE root directory.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; make clean
&gt; make
...
community codes <span class="nv">build</span>
<span class="o">==================</span>
* sse
* hermite0
* bhtree
* phiGRAPE
running generate_main
</pre></div>
</div>
<p>If everything goes well all community codes will be build (e.g. sse, hermite0,
bhtree, phiGRAPE and many others).</p>
<p>In order to use codes not stored in the AMUSE repository (e.g. MESA, ATHENA, Rebound and some others), the codes must be downloaded additionally.
This is done automatically after setting the environment variable DOWNLOAD_CODES to 1.
Alternatively, instead of a plain ‘make’ like in the example above you could do:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; make <span class="nv">DOWNLOAD_CODES</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; make mesa.code <span class="nv">DOWNLOAD_CODES</span><span class="o">=</span><span class="m">1</span>
&gt; make athena.code <span class="nv">DOWNLOAD_CODES</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-the-build">
<h2>Testing the build<a class="headerlink" href="#testing-the-build" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>For MPICH2 installations, the <cite>mpd</cite> process daemon must be
started befor testing the code. The <cite>mpd</cite> application manages
the creation of MPI processes. If this is the first time the
MPICH2 daemon is run it will complain about a missing
<code class="docutils literal notranslate"><span class="pre">.mpd.conf</span></code> file. Please follow the instructions printed by
the mpd daemon.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; mpd <span class="p">&amp;</span>
</pre></div>
</div>
<p>If the mpd deamon only complains with ‘no mpd.conf’, these
are the steps to take, to create a mpd.conf file:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; <span class="nb">echo</span> <span class="s1">&#39;MPD_SECRETWORD=secret&#39;</span> &gt; ~/.mpd.conf
&gt; chmod <span class="m">600</span> ~/.mpd.conf
</pre></div>
</div>
<p>Please make sure to replace ‘’‘secret’‘’.</p>
<p class="last">After starting <cite>mpd</cite> we can start the tests.</p>
</div>
<p>The tests are run using the nosetests program.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; nosetests
............................................
Ran <span class="m">91</span> tests in <span class="m">12</span>.013s

OK
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>If you have an MPICH2 installation but no mpd program your MPICH2
installation has been configured for the Hydra process manager.
To run amuse scripts with the hydra process manager you must start
every command with <code class="docutils literal notranslate"><span class="pre">mpiexec</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; mpiexec nosetests -v
</pre></div>
</div>
<p>If you do not run under mpiexec you get an error with a usage statement.
The error starts like this:</p>
<div class="last highlight-sh notranslate"><div class="highlight"><pre><span></span>unable to parse user arguments

Usage: ./mpiexec <span class="o">[</span>global opts<span class="o">]</span> <span class="o">[</span>exec1 <span class="nb">local</span> opts<span class="o">]</span> : <span class="o">[</span>exec2 <span class="nb">local</span> opts<span class="o">]</span> : ...
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>On some laptops the hostname will not point
to the correct internet address. For these laptops
you can start the mpd daemon on the localhost ip. To do so,
you need to set the <code class="docutils literal notranslate"><span class="pre">--ifhn</span></code> option:</p>
<div class="last highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; mpd --ifhn<span class="o">=</span>localhost <span class="p">&amp;</span>
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>On OS X, when you install the prerequisites with macports,
<code class="docutils literal notranslate"><span class="pre">nosetests</span></code> will not have a standard name. It will be named
<code class="docutils literal notranslate"><span class="pre">nosetests-&lt;python-version&gt;</span></code>. So for python2.7 you’ll need to
use <em>nosetests-2.7</em></p>
<div class="last highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; nosetests-2.7
............................................

OK
</pre></div>
</div>
</div>
<div class="section" id="real-time-testing">
<h3>Real-time testing<a class="headerlink" href="#real-time-testing" title="Permalink to this headline">¶</a></h3>
<p>The code includes support for real-time testing. The real-time testing
application monitors the files in the source directories (‘src’
and ‘test’). Every time a file is changed it will run most of the tests.
After each test a report is created, this report can be viewed with
a web browser.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># go to the AMUSE root directory</span>
<span class="c1"># display help information of the realtime_test script</span>
&gt;  python -m support.realtime_test --help
Usage: realtime_test.py <span class="o">[</span>options<span class="o">]</span>

Options:
  -h, --help            show this <span class="nb">help</span> message and <span class="nb">exit</span>
  -p PORT, --port<span class="o">=</span>PORT  start serving on PORT

<span class="c1"># start the python realtime_test script on port 9080</span>
&gt; python -m support.realtime_test -p <span class="m">9080</span>
starting server on port:  <span class="m">9080</span>
start <span class="nb">test</span> run
...
<span class="c1"># open a browser to view the results</span>
&gt; firefox http://localhost:9080/
</pre></div>
</div>
</div>
</div>
<div class="section" id="running-the-code">
<h2>Running the code<a class="headerlink" href="#running-the-code" title="Permalink to this headline">¶</a></h2>
<p>A python script will not find the AMUSE code as the code is not
installed into the python ‘site-packages’ directory or any other
directory that can be found by python automatically.</p>
<p>During a build a shell script is created to run the AMUSE code. To
use this script you first have to copy it to a directory in your PATH.
The script is called ‘’amuse.sh’‘. After copying this script you can run
amuse code from anywhere on your disk by starting ‘amuse.sh’. This
script has exactly the same command line parameters as the normal python
application.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; amuse.sh
Python <span class="m">2</span>.6.2 <span class="o">(</span>r262:71600, Sep  <span class="m">1</span> <span class="m">2009</span>, <span class="m">16</span>:14:27<span class="o">)</span>
<span class="o">[</span>GCC <span class="m">4</span>.3.2 <span class="m">20081105</span> <span class="o">(</span>Red Hat <span class="m">4</span>.3.2-7<span class="o">)]</span> on linux2
Type <span class="s2">&quot;help&quot;</span>, <span class="s2">&quot;copyright&quot;</span>, <span class="s2">&quot;credits&quot;</span> or <span class="s2">&quot;license&quot;</span> <span class="k">for</span> more information.
&gt;&gt;&gt; from amuse.units import units
&gt;&gt;&gt; units.m
unit&lt;m&gt;
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="getting-started.html" class="btn btn-neutral float-right" title="Getting started with AMUSE" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install-prerequisites-suse.html" class="btn btn-neutral float-left" title="Installing on Suse Linux" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2009-2019 The AMUSE Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
    <!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://stats.amusecode.org/" : "http://stats.amusecode.org/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://stats.amusecode.org/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

     


</body>
</html>