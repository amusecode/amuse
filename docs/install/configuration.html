

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuring AMUSE &mdash; AMUSE 12.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Writing documentation" href="documenting.html" />
    <link rel="prev" title="Getting started with AMUSE" href="getting-started.html" />
     
    <link rel="stylesheet" href="../_static/default.css" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AMUSE
          

          
          </a>

          
            
            
              <div class="version">
                12.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="howto-obtain-AMUSE.html">Obtaining AMUSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto-install-prerequisites.html">Installation of the prerequisite software</a></li>
<li class="toctree-l2"><a class="reference internal" href="howto-install-AMUSE.html">Installation of the AMUSE software</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html">Getting started with AMUSE</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Configuring AMUSE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic">Basic</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gpu">GPU</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sapporo-library-version">Sapporo library version</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="documenting.html">Writing documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive_tutorial/index.html">Interactive tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AMUSE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Installation</a> &raquo;</li>
        
      <li>Configuring AMUSE</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/install/configuration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuring-amuse">
<span id="configuration-label"></span><h1>Configuring AMUSE<a class="headerlink" href="#configuring-amuse" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>In AMUSE a configuration script is used to for two purposes; to run
on different operating systems and to set compile time options. The
AMUSE framework has been built on Linux, AIX and OS X systems, it
also runs on Windows. AMUSE can be configured to run with or without
MPI, GPU (CUDA) and openmp. In this document we will provide a short
overview of the configuration options and their effects.</p>
</div>
<div class="section" id="basic">
<h2>Basic<a class="headerlink" href="#basic" title="Permalink to this headline">¶</a></h2>
<p>The basic configuration of AMUSE uses MPI as the communication
channel, does not build any GPU enabled codes (or GPU enabled
versions) and uses openmp if available.  The configuration script
can be run as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="o">./</span><span class="n">configure</span>
</pre></div>
</div>
<p>To get a list of options and important environment variables run
<code class="docutils literal notranslate"><span class="pre">`configure`</span></code> with the help flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>A very important variable for the configuration script is the
location of the python executable. The python executable is searched
for in the PATH and you can override it by setting the <code class="docutils literal notranslate"><span class="pre">`PYTHON`</span></code>
environment variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="o">./</span><span class="n">configure</span> <span class="n">PYTHON</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">libraries</span><span class="o">/</span><span class="n">python</span>
</pre></div>
</div>
<p>The configuration script will look for dependent libraries in
default locations of the system and, if defined, also in directories
under the <code class="docutils literal notranslate"><span class="pre">`PREFIX`</span></code> environment variable. If you installed the
prerequisites with the AMUSE installation scripts (see
<a class="reference internal" href="howto-install-prerequisites.html"><span class="doc">Installation of the prerequisite software</span></a>), the configuration script should
find all the packages installed. For most libraries the
<code class="docutils literal notranslate"><span class="pre">`PREFIX/lib`</span></code> or <code class="docutils literal notranslate"><span class="pre">`PREFIX/lib64`</span></code> is searched before the system
path. You can override the <code class="docutils literal notranslate"><span class="pre">`PREFIX`</span></code> environment variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="o">./</span><span class="n">configure</span> <span class="n">PREFIX</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">libraries</span><span class="o">/</span><span class="n">root</span>
</pre></div>
</div>
</div>
<div class="section" id="gpu">
<span id="configuration-gpu-label"></span><h2>GPU<a class="headerlink" href="#gpu" title="Permalink to this headline">¶</a></h2>
<p>Currently all codes in AMUSE capable of using the GPU are based
on CUDA. To run these codes you will need CUDA libraries and drivers.
Once these have been installed you can run configure like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">cuda</span>
</pre></div>
</div>
<p>The configuration script will look for the <code class="docutils literal notranslate"><span class="pre">`nvcc`</span></code> compiler and the
cuda libraries, in well known paths. Unfortunately it often will not find
the cuda tools and you have to specify the some environment variables or
configuration options.</p>
<p>If the configuration script cannot find the nvcc compiler (or if it
finds the wrong one) you can specify the nvcc compiler with the
<code class="docutils literal notranslate"><span class="pre">`NVCC`</span></code> environment variable:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">cuda</span> <span class="n">NVCC</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">nvcc</span>
</pre></div>
</div>
<p>The configure script also searches for the nvcc compiler in the
<code class="docutils literal notranslate"><span class="pre">`$CUDA_TK/bin`</span></code> directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">cuda</span> <span class="n">CUDA_TK</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">nvidia</span>
</pre></div>
</div>
<p>The configure script looks for cuda and cudart libraries in
<code class="docutils literal notranslate"><span class="pre">`$NVCC/../lib`</span></code> or <code class="docutils literal notranslate"><span class="pre">`$NVCC/../lib64`</span></code>, if your libraries cannot
be found there you can override the library path with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">cuda</span> <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">cuda</span><span class="o">-</span><span class="n">libdir</span><span class="o">=/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">cuda</span><span class="o">/</span><span class="n">lib</span>
</pre></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">`--with-cuda-libdir`</span></code> will always override the local
search paths and should also work if you have an old version of cuda
in <code class="docutils literal notranslate"><span class="pre">`/usr/lib`</span></code>.</p>
<p>Finally, if all else fails, you can edit the <code class="docutils literal notranslate"><span class="pre">`config.mk`</span></code> file
after configure has finished. The important variables in the file are:</p>
<blockquote>
<div><ul class="simple">
<li>CUDA_ENABLED, valid values are “yes” or “no”.</li>
<li>NVCC, absolute path to the nvcc executable.</li>
<li>CUDA_TK, directory of the cuda toolkit installation</li>
<li>CUDA_LIBS, library flags the add in the linking stage (-L/path -lcuda -lcudart)</li>
</ul>
</div></blockquote>
<p>Please remember that the <code class="docutils literal notranslate"><span class="pre">`config.mk`</span></code> file is overwritten
every time configure is run.</p>
<div class="section" id="sapporo-library-version">
<h3>Sapporo library version<a class="headerlink" href="#sapporo-library-version" title="Permalink to this headline">¶</a></h3>
<p>The Sapporo library will be build when CUDA is enabled. The Sapporo
library implements the GRAPE6 API on GPU hardware. AMUSE is shipped
with two versions of the Sapporo library:</p>
<blockquote>
<div><ul class="simple">
<li>An older version <code class="docutils literal notranslate"><span class="pre">`sapporo_light`</span></code> that runs on most CUDA devices but is not maintained any longer</li>
<li>The latests version <code class="docutils literal notranslate"><span class="pre">`sapporo`</span></code> that runs on modern GPU hardware. This version should also run on
OpenCL devices but this is still a work in progress.</li>
</ul>
</div></blockquote>
<p>By default AMUSE will use the older <code class="docutils literal notranslate"><span class="pre">`sapporo_light`</span></code> version, to enable
the latests version do:</p>
<blockquote>
<div>&gt; ./configure –enable-cuda –enable-sapporo2</div></blockquote>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="documenting.html" class="btn btn-neutral float-right" title="Writing documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="getting-started.html" class="btn btn-neutral float-left" title="Getting started with AMUSE" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2009-2019 The AMUSE Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
    <!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://stats.amusecode.org/" : "http://stats.amusecode.org/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://stats.amusecode.org/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

     


</body>
</html>