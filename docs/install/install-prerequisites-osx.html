

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Installing on macOS &mdash; AMUSE 12.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installing on Arch Linux" href="install-prerequisites-arch.html" />
    <link rel="prev" title="Installing on Ubuntu" href="install-prerequisites-ubuntu.html" />
     
    <link rel="stylesheet" href="../_static/default.css" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AMUSE
          

          
          </a>

          
            
            
              <div class="version">
                12.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="howto-obtain-AMUSE.html">Obtaining AMUSE</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="howto-install-prerequisites.html">Installation of the prerequisite software</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="install-prerequisites-ubuntu.html">Installing on Ubuntu</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Installing on macOS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installing-on-macos-with-macports">Installing on macOS with MacPorts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="install-prerequisites-arch.html">Installing on Arch Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-prerequisites-fedora.html">Installing on Fedora 18</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-prerequisites-fedora.html#installing-on-fedora-11">Installing on Fedora 11</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-prerequisites-centos.html">Installing on RedHat (CentOS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="install-prerequisites-suse.html">Installing on Suse Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="howto-install-prerequisites.html#compilers">Compilers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="howto-install-AMUSE.html">Installation of the AMUSE software</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html">Getting started with AMUSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuration.html">Configuring AMUSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="documenting.html">Writing documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive_tutorial/index.html">Interactive tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AMUSE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Installation</a> &raquo;</li>
        
          <li><a href="howto-install-prerequisites.html">Installation of the prerequisite software</a> &raquo;</li>
        
      <li>Installing on macOS</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/install/install-prerequisites-osx.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="installing-on-macos">
<h1>Installing on macOS<a class="headerlink" href="#installing-on-macos" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installing-on-macos-with-macports">
<h2>Installing on macOS with MacPorts<a class="headerlink" href="#installing-on-macos-with-macports" title="Permalink to this headline">¶</a></h2>
<p>In this section we assume a clean MacPorts installation. The MacPorts build
system will build most packages from source so installation may take a while.
The packages in MacPorts support different <em>variants</em>, each <em>variant</em> is built
differently. Below, with all installation commands we will specify the variant
where needed. AMUSE is tested with gcc versions 4.3 up to 8. Below, we will use
gcc 7.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you want to use a different fortran compiler (ifort), you are better
off using the <strong>install.py</strong> script in the <strong>doc/install</strong> directory.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Make sure you have a recent MacPorts installation. Do this by running</p>
<p>&gt; sudo port selfupdate</p>
<p class="last">before installing.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you are unsure of your installation you can uninstall and clear the
packages with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">port</span> <span class="n">uninstall</span> <span class="n">py27</span><span class="o">-</span><span class="n">docutils</span> <span class="n">py27</span><span class="o">-</span><span class="n">nose</span> <span class="n">py27</span><span class="o">-</span><span class="n">mpi4py</span> <span class="n">py27</span><span class="o">-</span><span class="n">h5py</span> <span class="n">py27</span><span class="o">-</span><span class="n">numpy</span> <span class="n">hdf5</span> <span class="n">fftw</span><span class="o">-</span><span class="mi">3</span> <span class="n">gsl</span> <span class="n">openmpi</span> <span class="n">python27</span>
</pre></div>
</div>
<p class="last">To make a clean install of MacPorts, please remove the MacPorts directory
and read the guide at:
<a class="reference external" href="https://guide.macports.org/">https://guide.macports.org/</a></p>
</div>
<div class="section" id="all-in-one">
<h3>All in one<a class="headerlink" href="#all-in-one" title="Permalink to this headline">¶</a></h3>
<p>You can install all the packages described below in one go with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">gcc7</span>

<span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">python27</span>
<span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">openmpi</span><span class="o">-</span><span class="n">gcc7</span>
<span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">fftw</span><span class="o">-</span><span class="mi">3</span> <span class="o">+</span><span class="n">gcc7</span>
<span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">hdf5</span> <span class="n">gsl</span> <span class="n">cmake</span> <span class="n">gmp</span> <span class="n">mpfr</span>
<span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">py27</span><span class="o">-</span><span class="n">numpy</span> <span class="n">py27</span><span class="o">-</span><span class="n">h5py</span> <span class="n">py27</span><span class="o">-</span><span class="n">nose</span> <span class="n">py27</span><span class="o">-</span><span class="n">docutils</span>
<span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">py27</span><span class="o">-</span><span class="n">mpi4py</span> <span class="o">+</span><span class="n">openmpi</span>
<span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">py27</span><span class="o">-</span><span class="n">matplotlib</span>
</pre></div>
</div>
<p>To make sure the right MacPorts compilers and python are set as default, do the
following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">select</span> <span class="o">--</span><span class="nb">set</span> <span class="n">mpi</span> <span class="n">openmpi</span><span class="o">-</span><span class="n">gcc7</span><span class="o">-</span><span class="n">fortran</span>
<span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">select</span> <span class="o">--</span><span class="nb">set</span> <span class="n">gcc</span> <span class="n">mp</span><span class="o">-</span><span class="n">gcc7</span>
<span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">select</span> <span class="o">--</span><span class="nb">set</span> <span class="n">python</span> <span class="n">python27</span>
<span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">select</span> <span class="o">--</span><span class="nb">set</span> <span class="n">nosetests</span> <span class="n">nosetests27</span>
</pre></div>
</div>
<p>After installing you will need to configure the code with the following line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="k">with</span><span class="o">-</span><span class="n">fftw</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">local</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">--with-fftw</span></code> option will ensure that fftw is found in
<code class="docutils literal notranslate"><span class="pre">/opt/local</span></code> and not in any other location on macOS. Sometimes, incompatible versions of
fftw may be installed in <code class="docutils literal notranslate"><span class="pre">/usr/include</span></code> or <code class="docutils literal notranslate"><span class="pre">/usr/local/inlude</span></code>. These versions may
have the wrong processor type (32 vs 64bits) or not contain a fortran API. For both cases
compiling <code class="docutils literal notranslate"><span class="pre">Fi</span></code> will fail.
In case the configure script does not pick the wanted fftw directories, you
can edit the <code class="docutils literal notranslate"><span class="pre">config.mk</span></code> file to point to the right version.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal notranslate"><span class="pre">PREFIX</span></code> variable will make sure some support libraries for
community codes (gsl, gmp and mpfr) are found in <code class="docutils literal notranslate"><span class="pre">/opt/local</span></code>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Please, make sure you have no other compile variables specified
(like CC or CXX or CFLAGS), unless you have customized MacPorts in
any way. Some variable settings will likely give compile errors
for the community codes.</p>
<p class="last">For example, BHTree is compiled with openmpicxx and $CXX.
The command in the CXX variable must be compatible
with openmpicxx (you can do <code class="docutils literal notranslate"><span class="pre">openmpicxx</span> <span class="pre">--show</span></code> to get
the command openmpicxx is using)</p>
</div>
</div>
<div class="section" id="gcc">
<h3>GCC<a class="headerlink" href="#gcc" title="Permalink to this headline">¶</a></h3>
<p>By default MacPorts uses the XCode compilers, these compilers have no support
for fortran, a MacPorts gcc compiler set needs to be installed. We suggest
installing gcc 7 as the most reliable option:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; sudo port install gcc7
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you have installed a different version of gcc, you need to select
a different variant of the packages below. To select a different variant
replace <strong>+gcc7</strong> with <strong>+gcc6</strong>, <strong>+gcc8</strong> or any other version
matching your gcc installation. Note, apple-gcc versions will not work,
these do not support fortran.</p>
</div>
</div>
<div class="section" id="python">
<h3>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h3>
<p>MacPorts supports several python versions in different variants, we will install
the python27 versions</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>&gt; sudo port install python27
</pre></div>
</div>
</div>
<div class="section" id="mpi2">
<h3>MPI2<a class="headerlink" href="#mpi2" title="Permalink to this headline">¶</a></h3>
<p>MacPorts provides packages for mpich and openmpi. Although you can
probably install both, this is not recommended. We suggest you install
openmpi.</p>
<p>To install openmpi, do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">openmpi</span> <span class="o">+</span><span class="n">gcc7</span>
</pre></div>
</div>
</div>
<div class="section" id="hdf5">
<h3>HDF5<a class="headerlink" href="#hdf5" title="Permalink to this headline">¶</a></h3>
<p>Amuse can work with HDF5 versions 1.6.*, 1.8.3 and higher. MacPorts comes
with HDF5 version 1.8.* and 1.10.* To install the most recent version, do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">hdf5</span>
</pre></div>
</div>
</div>
<div class="section" id="fftw-3">
<h3>FFTW-3<a class="headerlink" href="#fftw-3" title="Permalink to this headline">¶</a></h3>
<p>MacPorts comes with a FFTW and FFTW-3 package, for AMUSE we need FFTW-3.
FFTW-3 can be installed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">fftw</span><span class="o">-</span><span class="mi">3</span> <span class="o">+</span><span class="n">gcc7</span>
</pre></div>
</div>
</div>
<div class="section" id="gsl">
<h3>GSL<a class="headerlink" href="#gsl" title="Permalink to this headline">¶</a></h3>
<p>GSL is used to build Gadget2, GSL can be installed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">gsl</span>
</pre></div>
</div>
</div>
<div class="section" id="cmake">
<h3>CMake<a class="headerlink" href="#cmake" title="Permalink to this headline">¶</a></h3>
<p>CMake is used to build EVTwin, CMake can be installed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">cmake</span>
</pre></div>
</div>
</div>
<div class="section" id="gmp">
<h3>GMP<a class="headerlink" href="#gmp" title="Permalink to this headline">¶</a></h3>
<p>GMP is required for Adaptb. With MacPorts, GMP can be installed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">gmp</span>
</pre></div>
</div>
</div>
<div class="section" id="mpfr">
<h3>MPFR<a class="headerlink" href="#mpfr" title="Permalink to this headline">¶</a></h3>
<p>MPFR is required for Adaptb. With MacPorts, MPFR can be installed with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">mpfr</span>
</pre></div>
</div>
</div>
<div class="section" id="python-packages">
<h3>Python packages<a class="headerlink" href="#python-packages" title="Permalink to this headline">¶</a></h3>
<p>By this point all libraries and frameworks are installed. We can now
install python packages (some depend on the installed libraries):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">py27</span><span class="o">-</span><span class="n">numpy</span> <span class="n">py27</span><span class="o">-</span><span class="n">h5py</span> <span class="n">py27</span><span class="o">-</span><span class="n">nose</span> <span class="n">py27</span><span class="o">-</span><span class="n">docutils</span>
</pre></div>
</div>
<p>If you installed openmpi in the MPI2 step you need to set the
“openmpi” variant for “py27-mpi4py”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">py27</span><span class="o">-</span><span class="n">mpi4py</span> <span class="o">+</span><span class="n">openmpi</span>
</pre></div>
</div>
</div>
<div class="section" id="matplotlib">
<h3>Matplotlib<a class="headerlink" href="#matplotlib" title="Permalink to this headline">¶</a></h3>
<p>Matplotlib is not required but is highly recommended for creating graphics,
you can install it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">install</span> <span class="n">py27</span><span class="o">-</span><span class="n">matplotlib</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Macports will install the compilers under non standard names.
To make sure the right MacPorts compilers and python are set as default, do
the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">select</span> <span class="o">--</span><span class="nb">set</span> <span class="n">mpi</span> <span class="n">openmpi</span><span class="o">-</span><span class="n">gcc7</span><span class="o">-</span><span class="n">fortran</span>
<span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">select</span> <span class="o">--</span><span class="nb">set</span> <span class="n">gcc</span> <span class="n">mp</span><span class="o">-</span><span class="n">gcc7</span>
<span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">select</span> <span class="o">--</span><span class="nb">set</span> <span class="n">python</span> <span class="n">python27</span>
<span class="o">&gt;</span> <span class="n">sudo</span> <span class="n">port</span> <span class="n">select</span> <span class="o">--</span><span class="nb">set</span> <span class="n">nosetests</span> <span class="n">nosetests27</span>
</pre></div>
</div>
<p>Alternatively, to use the right compilers you can specify these during the
configure stage of AMUSE.</p>
<p>See the output for <code class="docutils literal notranslate"><span class="pre">configure</span> <span class="pre">--help</span></code> for a list of all
environment variables you can set.</p>
<p>If you installed openmpi you need to specify the mpi compilers
like so (replacing OPENMPICXX OPENMPICC and OPENMPIF90 with your installed compiler):</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">configure</span> <span class="n">MPICXX</span><span class="o">=</span><span class="n">OPENMPICXX</span> <span class="n">MPICC</span><span class="o">=</span><span class="n">OPENMPICC</span> <span class="n">MPIFC</span><span class="o">=</span><span class="n">OPENMPIF90</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="install-prerequisites-arch.html" class="btn btn-neutral float-right" title="Installing on Arch Linux" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install-prerequisites-ubuntu.html" class="btn btn-neutral float-left" title="Installing on Ubuntu" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2009-2019 The AMUSE Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
    <!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://stats.amusecode.org/" : "http://stats.amusecode.org/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://stats.amusecode.org/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

     


</body>
</html>