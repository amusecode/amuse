

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Bridge &mdash; AMUSE 12.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Currently supported Community Codes" href="available-codes.html" />
    <link rel="prev" title="Particle Attributes" href="particle_attributes.html" />
     
    <link rel="stylesheet" href="../_static/default.css" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AMUSE
          

          
          </a>

          
            
            
              <div class="version">
                12.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive_tutorial/index.html">Interactive tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quantities_and_units.html">Quantities and Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="particles.html">Datamodel</a></li>
<li class="toctree-l2"><a class="reference internal" href="particle_attributes.html">Particle Attributes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Bridge</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-amuse.couple.bridge">Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="available-codes.html">Currently supported Community Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_support.html">Support code for AMUSE framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="legacy_support.html">Support code for the community code interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="fileformat.html">Supported File Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="report.html">Reporting during a run</a></li>
<li class="toctree-l2"><a class="reference internal" href="stopping_conditions.html">Stopping Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="from_codes_to_data.html">From Codes to Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="ioframework.html">Input / Output Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="options.html">Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="directory-structure.html">Directory Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="incode_storage.html">Sets and Grids in Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="cuda-setup.html">Setting up GPGPU with CUDA</a></li>
<li class="toctree-l2"><a class="reference internal" href="simplified_function_interface.html">Simplified interface function specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface_specification.html">Interface Specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="message-protocol.html">Message protocol between python and community codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="distributed.html">Distributed AMUSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="cartesius.html">Running AMUSE on The Cartesius supercomputer</a></li>
<li class="toctree-l2"><a class="reference internal" href="style_guide.html">AMUSE Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_management.html">Source Code Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AMUSE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Reference documentation</a> &raquo;</li>
        
      <li>Bridge</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/reference/bridge.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="bridge">
<h1>Bridge<a class="headerlink" href="#bridge" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-amuse.couple.bridge">
<span id="code"></span><h2>Code<a class="headerlink" href="#module-amuse.couple.bridge" title="Permalink to this headline">¶</a></h2>
<p>bridge-like integrator for amuse</p>
<p>the bridge class provides a bridge like coupling between different
gravitational integrators. In this way a system composed of multiple
components can be evolved taking account of the self gravity of the whole
system self consistently, while choosing the most appropiate integrator
for the self-gravity of the component systems. This is mainly useful for
systems  consist of two or more components that are either well separated
spatially or have different scales (otherwise using a single integrator is
more efficient)</p>
<p>The main idea is that systems experience each others gravity through
periodic velocty kicks with ordinary evolution in  between - the evolution
is thus described by an alternation of drift (D) and  kick (K) operators,
here chosen as:</p>
<blockquote>
<div>K(1/2 dt) D(dt) K(1/2 dt)</div></blockquote>
<p>K(dt) denotes a kick of the velocities over a timestep dt, while D(dt)
denotes  a drift, meaning secular evolution using self gravity of the
system, over dt.</p>
<p>implementation notes:</p>
<p>In order to use bridge the component systems should be initialized as usual,
then a bridge systems is initialized, after which one or more systems are
added:</p>
<p>from amuse.ext.bridge import bridge</p>
<p>bridgesys=bridge(verbose=False)
bridgesys.add_system(galaxy, (cluster,), False)
bridgesys.add_system(cluster, (galaxy,), True )</p>
<p>bridge builds on the full gravity interface, so unit handling etc is
guaranteed. Bridge itself is a (somewhat incomplete) gravity interface,
so  the usual evolve, get_potential methods work (and bridge can be a
component  in a bridge systems). Note that a single coordinate system should
be used at the moment for all the components systems (different units are
allowed though). The call to add systems, for example:</p>
<p>bridgesys.add_system(galaxy, (cluster,), False)</p>
<p>has three arguments: the system, a set with <em>interaction</em> partners and
a flag to specify whether synchronization is needed . The
interaction partners indicate which systems will kick the system. In the
most simple case these  would be the set of other systems that are added,
but usually this is not  what you want to get good performace. In some
cases you want to ignore one  direction of interaction (eg. in a combined
simulation of a galaxy and a  comet orbits around a star you may want the
ignore the gravity of the comet), in other cases you want to use a
different force calculator (eg integrating a cluster in  a galaxy where
the galaxy is evolved with a tree code and the cluster with a direct sum
code, one also would want to use a tree code to calculate the cluster
gravity for the galaxy. In such a case one can derive a skeleton gravity
interface from  the cluster system.  A module is provided with some
examples of such <em>derived</em> systems, derived_grav_systems.py</p>
<p>Hints for good use:</p>
<p>The bridgesys is flexible but care should be taken in order to obtain
valid results. For one thing, there is no restriction or check on the
validity of the assumption of well seperated dynamics: for example any
system could be split up and put together in bridge, but if the timestep
is chosen to be larger than the timestep criterion of the code, the
integration will show errors.</p>
<p>For good performance one should use derived systems to reduce the
complexity where possible.</p>
<p>There is an issue with the synchronization: some codes do not end on the
exact time of an evolve, or need an explicit sync call. In these cases it
is up to the user to  determine whether bridge can be used (an explicit
sync call may induce extra errors that degrade the order of the
integrator).</p>
<dl class="class">
<dt id="amuse.couple.bridge.Bridge">
<em class="property">class </em><code class="descclassname">amuse.couple.bridge.</code><code class="descname">Bridge</code><span class="sig-paren">(</span><em>timestep=None</em>, <em>verbose=False</em>, <em>use_threading=True</em>, <em>method=None</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.Bridge" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="amuse.couple.bridge.Bridge.add_system">
<code class="descname">add_system</code><span class="sig-paren">(</span><em>interface</em>, <em>partners=set([])</em>, <em>do_sync=True</em>, <em>radius_is_eps=False</em>, <em>h_smooth_is_eps=False</em>, <em>zero_smoothing=False</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.Bridge.add_system" title="Permalink to this definition">¶</a></dt>
<dd><p>add a system to bridge integrator</p>
</dd></dl>

<dl class="method">
<dt id="amuse.couple.bridge.Bridge.evolve_model">
<code class="descname">evolve_model</code><span class="sig-paren">(</span><em>tend</em>, <em>timestep=None</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.Bridge.evolve_model" title="Permalink to this definition">¶</a></dt>
<dd><p>evolve combined system to tend, timestep fixes timestep</p>
</dd></dl>

<dl class="method">
<dt id="amuse.couple.bridge.Bridge.synchronize_model">
<code class="descname">synchronize_model</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.Bridge.synchronize_model" title="Permalink to this definition">¶</a></dt>
<dd><p>explicitly synchronize all components</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="amuse.couple.bridge.AbstractCalculateFieldForCodes">
<em class="property">class </em><code class="descclassname">amuse.couple.bridge.</code><code class="descname">AbstractCalculateFieldForCodes</code><span class="sig-paren">(</span><em>input_codes</em>, <em>verbose=False</em>, <em>required_attributes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.AbstractCalculateFieldForCodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculated gravity and potential fields using the particles
of other codes with the code provided.</p>
<dl class="method">
<dt id="amuse.couple.bridge.AbstractCalculateFieldForCodes.evolve_model">
<code class="descname">evolve_model</code><span class="sig-paren">(</span><em>tend</em>, <em>timestep=None</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.AbstractCalculateFieldForCodes.evolve_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="amuse.couple.bridge.CalculateFieldForCodes">
<em class="property">class </em><code class="descclassname">amuse.couple.bridge.</code><code class="descname">CalculateFieldForCodes</code><span class="sig-paren">(</span><em>code_factory_function</em>, <em>input_codes</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.CalculateFieldForCodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculated gravity and potential fields using the particles
of other codes with the code provided.
The code is created for every calculation.</p>
</dd></dl>

<dl class="class">
<dt id="amuse.couple.bridge.CalculateFieldForCodesUsingReinitialize">
<em class="property">class </em><code class="descclassname">amuse.couple.bridge.</code><code class="descname">CalculateFieldForCodesUsingReinitialize</code><span class="sig-paren">(</span><em>code</em>, <em>input_codes</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.CalculateFieldForCodesUsingReinitialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculated gravity and potential fields using the particles
of other codes with the code provided.
The code is created for every calculation.</p>
</dd></dl>

<dl class="class">
<dt id="amuse.couple.bridge.CalculateFieldForCodesUsingRemove">
<em class="property">class </em><code class="descclassname">amuse.couple.bridge.</code><code class="descname">CalculateFieldForCodesUsingRemove</code><span class="sig-paren">(</span><em>code</em>, <em>input_codes</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.CalculateFieldForCodesUsingRemove" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculated gravity and potential fields using the particles
of other codes with the code provided.
The code is created for every calculation.</p>
</dd></dl>

<dl class="class">
<dt id="amuse.couple.bridge.CalculateFieldForParticles">
<em class="property">class </em><code class="descclassname">amuse.couple.bridge.</code><code class="descname">CalculateFieldForParticles</code><span class="sig-paren">(</span><em>particles=None</em>, <em>gravity_constant=None</em>, <em>softening_mode='shared'</em>, <em>G=None</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.CalculateFieldForParticles" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates an field for a set of particles, the set
of particles can be from another code.</p>
<dl class="method">
<dt id="amuse.couple.bridge.CalculateFieldForParticles.evolve_model">
<code class="descname">evolve_model</code><span class="sig-paren">(</span><em>tend</em>, <em>timestep=None</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.CalculateFieldForParticles.evolve_model" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="amuse.couple.bridge.GravityCodeInField">
<em class="property">class </em><code class="descclassname">amuse.couple.bridge.</code><code class="descname">GravityCodeInField</code><span class="sig-paren">(</span><em>code</em>, <em>field_codes</em>, <em>do_sync=True</em>, <em>verbose=False</em>, <em>radius_is_eps=False</em>, <em>h_smooth_is_eps=False</em>, <em>zero_smoothing=False</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.GravityCodeInField" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="amuse.couple.bridge.GravityCodeInField.cannot_kick">
<code class="descname">cannot_kick</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.GravityCodeInField.cannot_kick" title="Permalink to this definition">¶</a></dt>
<dd><p>check if the code is capable of kicking other particles,
please do not try to optimize this, I know it is called every kick but
only calculating it at the start causes an annoying bug in certain uses of the code.</p>
</dd></dl>

<dl class="method">
<dt id="amuse.couple.bridge.GravityCodeInField.evolve_model">
<code class="descname">evolve_model</code><span class="sig-paren">(</span><em>tend</em>, <em>timestep=None</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.GravityCodeInField.evolve_model" title="Permalink to this definition">¶</a></dt>
<dd><p>evolve combined system to tend, timestep fixes timestep</p>
</dd></dl>

<dl class="method">
<dt id="amuse.couple.bridge.GravityCodeInField.synchronize_model">
<code class="descname">synchronize_model</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#amuse.couple.bridge.GravityCodeInField.synchronize_model" title="Permalink to this definition">¶</a></dt>
<dd><p>explicitly synchronize all components</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="available-codes.html" class="btn btn-neutral float-right" title="Currently supported Community Codes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="particle_attributes.html" class="btn btn-neutral float-left" title="Particle Attributes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2009-2019 The AMUSE Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
    <!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://stats.amusecode.org/" : "http://stats.amusecode.org/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://stats.amusecode.org/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

     


</body>
</html>