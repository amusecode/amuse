

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>From Codes to Data &mdash; AMUSE 12.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Input / Output Framework" href="ioframework.html" />
    <link rel="prev" title="Stopping Conditions" href="stopping_conditions.html" />
     
    <link rel="stylesheet" href="../_static/default.css" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AMUSE
          

          
          </a>

          
            
            
              <div class="version">
                12.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive_tutorial/index.html">Interactive tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quantities_and_units.html">Quantities and Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="particles.html">Datamodel</a></li>
<li class="toctree-l2"><a class="reference internal" href="particle_attributes.html">Particle Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="bridge.html">Bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="available-codes.html">Currently supported Community Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_support.html">Support code for AMUSE framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="legacy_support.html">Support code for the community code interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="fileformat.html">Supported File Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="report.html">Reporting during a run</a></li>
<li class="toctree-l2"><a class="reference internal" href="stopping_conditions.html">Stopping Conditions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">From Codes to Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-first-level">The first level</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#adding-units">Adding units</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ioframework.html">Input / Output Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="options.html">Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="directory-structure.html">Directory Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="incode_storage.html">Sets and Grids in Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="cuda-setup.html">Setting up GPGPU with CUDA</a></li>
<li class="toctree-l2"><a class="reference internal" href="simplified_function_interface.html">Simplified interface function specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="interface_specification.html">Interface Specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="message-protocol.html">Message protocol between python and community codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="distributed.html">Distributed AMUSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="cartesius.html">Running AMUSE on The Cartesius supercomputer</a></li>
<li class="toctree-l2"><a class="reference internal" href="style_guide.html">AMUSE Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_management.html">Source Code Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AMUSE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Reference documentation</a> &raquo;</li>
        
      <li>From Codes to Data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/reference/from_codes_to_data.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="from-codes-to-data">
<h1>From Codes to Data<a class="headerlink" href="#from-codes-to-data" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The framework contains two distinct levels on which interaction with the codes takes place.
The first level interacts directly with the code and is implemented as a set of functions
on a class. The second level is built on top of the first level and abstracts the function calls
to handling objects and datasets. Often multiple function-calls on the first level can be
abstracted to a single statement (assignment or query) on the second level.</p>
</div>
<div class="section" id="the-first-level">
<h2>The first level<a class="headerlink" href="#the-first-level" title="Permalink to this headline">¶</a></h2>
<p>The first level is a direct interface to the code, in this chapter the kind of functions
supported by the first level interface code will be briefly described. All functions that can
be defined on the first level fall in two categories, those that handle scalars (a single
value for each parameter) or those that handle 1-D vectors (a list of values for each
parameters). For functions that handle 1-D vectors each vector must be of the same length.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Not every function will fit in the two categories, but it is usually possible
to rewrite a function or create a interfacing function that do fit into
one of the two categories. Supporting only these two categories keeps the
communication layer simpler and allows for some optimizations in the
communication between python and C/Fortran codes.</p>
</div>
<p>An example of using the first level with scalars and vectors:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">amuse.community.codes.athena.interface</span> <span class="k">import</span> <span class="n">AthenaInterface</span>

<span class="c1"># create an instance of the code (will start an application</span>
<span class="c1"># in the background to handle all requests)</span>
<span class="n">hydro</span> <span class="o">=</span> <span class="n">AthenaInterface</span><span class="p">()</span>

<span class="c1"># set parameters needed by the code</span>
<span class="c1"># these are functions handling one scalar input</span>
<span class="c1"># parameter</span>
<span class="n">hydro</span><span class="o">.</span><span class="n">set_gamma</span><span class="p">(</span><span class="mf">1.6666666666666667</span><span class="p">)</span>
<span class="n">hydro</span><span class="o">.</span><span class="n">set_courant_friedrichs_lewy_number</span><span class="p">(</span><span class="mf">0.8</span><span class="p">)</span>

<span class="c1"># define a grid having 5 cells in all directions and</span>
<span class="c1"># with the total length of the grid in each direction</span>
<span class="c1"># is 1.0</span>
<span class="c1"># this is a function handling multiple</span>
<span class="c1"># scalar input parameters</span>
<span class="n">hydro</span><span class="o">.</span><span class="n">setup_mesh</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>

<span class="c1"># setup boundary conditions</span>
<span class="c1"># (can be periodic, reflective, outflow)</span>
<span class="n">hydro</span><span class="o">.</span><span class="n">set_boundary</span><span class="p">(</span>
    <span class="s2">&quot;periodic&quot;</span><span class="p">,</span><span class="s2">&quot;periodic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;periodic&quot;</span><span class="p">,</span><span class="s2">&quot;periodic&quot;</span><span class="p">,</span>
    <span class="s2">&quot;periodic&quot;</span><span class="p">,</span><span class="s2">&quot;periodic&quot;</span>
<span class="p">)</span>

<span class="c1"># let the code do some work</span>
<span class="c1"># (athena will allocate the grid)</span>
<span class="c1"># this is a function handling no</span>
<span class="c1"># scalar input parameters and having</span>
<span class="c1"># 1 scalar output parameter</span>
<span class="n">hydro</span><span class="o">.</span><span class="n">commit_parameters</span><span class="p">()</span>

<span class="c1"># lets print the center position</span>
<span class="c1"># of one grid point</span>
<span class="nb">print</span> <span class="n">hydro</span><span class="o">.</span><span class="n">get_position_of_index</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>

<span class="c1"># all calls so far have been to functions handling scalar values</span>
<span class="c1"># the next calls will be to functions handling vectors of values</span>

<span class="c1"># lets print the center positions</span>
<span class="c1"># of all grid points on one line</span>
<span class="nb">print</span> <span class="n">hydro</span><span class="o">.</span><span class="n">get_position_of_index</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<p>In the previous example we used functions with scalar parameters and
vector parameters. The functions handling vectors often can also
handle scalars, the framework will take care of the necessary
conversions.</p>
<p>All first level functions are not actual python functions, these
functions are instances of a special Python class that
implements function call handling. To continue our example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># let&#39;s take a look at the kind of functions</span>
<span class="c1"># on the first level</span>
<span class="nb">print</span> <span class="n">hydro</span><span class="o">.</span><span class="n">get_position_of_index</span>

<span class="c1"># you can ask the specificition of a</span>
<span class="c1"># first level function</span>
<span class="nb">print</span> <span class="n">hydro</span><span class="o">.</span><span class="n">get_position_of_index</span><span class="o">.</span><span class="n">specification</span>
</pre></div>
</div>
<div class="section" id="adding-units">
<h3>Adding units<a class="headerlink" href="#adding-units" title="Permalink to this headline">¶</a></h3>
<p>The first step after defining a first level function is to
specify the units of the in- and output-parameters of the first
level function.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ioframework.html" class="btn btn-neutral float-right" title="Input / Output Framework" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="stopping_conditions.html" class="btn btn-neutral float-left" title="Stopping Conditions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2009-2019 The AMUSE Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
    <!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://stats.amusecode.org/" : "http://stats.amusecode.org/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://stats.amusecode.org/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

     


</body>
</html>