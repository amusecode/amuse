

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Hydrodynamics Interface Definition &mdash; AMUSE 12.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Radiative Transfer Interface Definition" href="radiative_transfer_interface_specification.html" />
    <link rel="prev" title="Stellar Evolution Interface Definition" href="stellar_evolution_interface_specification.html" />
     
    <link rel="stylesheet" href="../_static/default.css" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AMUSE
          

          
          </a>

          
            
            
              <div class="version">
                12.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interactive_tutorial/index.html">Interactive tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Reference documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="quantities_and_units.html">Quantities and Units</a></li>
<li class="toctree-l2"><a class="reference internal" href="particles.html">Datamodel</a></li>
<li class="toctree-l2"><a class="reference internal" href="particle_attributes.html">Particle Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="bridge.html">Bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="available-codes.html">Currently supported Community Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_support.html">Support code for AMUSE framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="legacy_support.html">Support code for the community code interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="fileformat.html">Supported File Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="report.html">Reporting during a run</a></li>
<li class="toctree-l2"><a class="reference internal" href="stopping_conditions.html">Stopping Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="from_codes_to_data.html">From Codes to Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="ioframework.html">Input / Output Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="options.html">Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="directory-structure.html">Directory Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="incode_storage.html">Sets and Grids in Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="cuda-setup.html">Setting up GPGPU with CUDA</a></li>
<li class="toctree-l2"><a class="reference internal" href="simplified_function_interface.html">Simplified interface function specification</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="interface_specification.html">Interface Specifications</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="introduction_interface_specification.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="stellar_dynamics_interface_specification.html">Stellar Dynamics Interface Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="stellar_evolution_interface_specification.html">Stellar Evolution Interface Definition</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Hydrodynamics Interface Definition</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#grid-management">Grid Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="#grid-state">Grid state</a></li>
<li class="toctree-l4"><a class="reference internal" href="#grid-state-extension-mechanism">Grid State, Extension Mechanism</a></li>
<li class="toctree-l4"><a class="reference internal" href="#model-evolution">Model evolution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#diagnostics">Diagnostics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#external-fields">External fields</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="radiative_transfer_interface_specification.html">Radiative Transfer Interface Definition</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="message-protocol.html">Message protocol between python and community codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="distributed.html">Distributed AMUSE</a></li>
<li class="toctree-l2"><a class="reference internal" href="cartesius.html">Running AMUSE on The Cartesius supercomputer</a></li>
<li class="toctree-l2"><a class="reference internal" href="style_guide.html">AMUSE Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_management.html">Source Code Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../design/index.html">Design documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AMUSE</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Reference documentation</a> &raquo;</li>
        
          <li><a href="interface_specification.html">Interface Specifications</a> &raquo;</li>
        
      <li>Hydrodynamics Interface Definition</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/reference/hydrodynamics_interface_specification.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hydrodynamics-interface-definition">
<h1>Hydrodynamics Interface Definition<a class="headerlink" href="#hydrodynamics-interface-definition" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>In this chapter we describe the common interface for all
hydrodynamics, grid based codes. For particle based, SPH codes see
the gravitational dynamics specifications.</p>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>All parameters have to be accessed with functions following
the template of the <code class="docutils literal notranslate"><span class="pre">get_timestep</span></code> and <code class="docutils literal notranslate"><span class="pre">set_timestep</span></code> functions.
A parameter access function may only retrieve or
update the value of a single parameter. After all parameters have been set, the
<code class="docutils literal notranslate"><span class="pre">commit_parameters</span></code> function should be called,
this gives the code the opportunity prepare the model.</p>
<dl class="class">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface">
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.commit_parameters">
<code class="descname">commit_parameters</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.commit_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform initialization in the code dependent on the
values of the parameters.
Called after the parameters have been set or updated.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">commit_parameters</span><span class="p">();</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">commit_parameters</span><span class="p">()</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">commit_parameters</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>0 - OK</dt>
<dd>Code is initialized</dd>
<dt>-1 - ERROR</dt>
<dd>Error happened during initialization, this error needs to be further specified by every code implemention</dd>
<dt>-2 - ERROR</dt>
<dd>not yet implemented</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="grid-management">
<h2>Grid Management<a class="headerlink" href="#grid-management" title="Permalink to this headline">¶</a></h2>
<p>Most hydrodynamical codes work on grids or a hierarchy of grids. The following
methods define the functionality to setup and query the grids.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code></dt>
<dd><dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.get_index_of_position">
<code class="descname">get_index_of_position</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.get_index_of_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the i,j and k index of the grid cell containing the
given x, y and z position. The cell is looked up
in the grid specified by index_of_grid.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">get_index_of_position</span><span class="p">(</span><span class="n">float64</span> <span class="n">x</span><span class="p">,</span> <span class="n">float64</span> <span class="n">y</span><span class="p">,</span> <span class="n">float64</span> <span class="n">z</span><span class="p">,</span> 
  <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">i</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">j</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">k</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">get_index_of_position</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">index_of_grid</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">get_index_of_position</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>y</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>z</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>i</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>j</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>k</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.get_index_range_inclusive">
<code class="descname">get_index_range_inclusive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.get_index_range_inclusive" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the min and max values of indices in each
direction. The range is inclusive, the min index
and max index both exist and can be queried.
The total number of cells in one direction
is max - min + 1.</p>
<p>The returntype is a list of 3 tuples, each tuples
contains the minimum and maximum value in the
index range.</p>
<p>Fo C/C++ codes the returned values will usually
be: ((0, nmeshx-1), (0, nmeshy-1), (0, nmeshz-1))</p>
<p>Fo Fortran codes the returned values will usually
be: ((1, nmeshx), (1, nmeshy), (1, nmeshz))</p>
</dd></dl>

<dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.get_position_of_index">
<code class="descname">get_position_of_index</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.get_position_of_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the x, y and z position of the center of
the cell with coordinates i, j, k in the grid specified
by the index_of_grid</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">get_position_of_index</span><span class="p">(</span><span class="n">int32</span> <span class="n">i</span><span class="p">,</span> <span class="n">int32</span> <span class="n">j</span><span class="p">,</span> <span class="n">int32</span> <span class="n">k</span><span class="p">,</span> 
  <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">z</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">get_position_of_index</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">get_position_of_index</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>j</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>k</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>x</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>y</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>z</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.set_boundary">
<code class="descname">set_boundary</code><span class="sig-paren">(</span><em>xbound1</em>, <em>xbound2</em>, <em>ybound1</em>, <em>ybound2</em>, <em>zbound1</em>, <em>zbound2</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.set_boundary" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the boundary conditions on the grid. Boundaries can be:
“reflective”, “periodic”.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>xbound1</strong> – inner or left boundary in the x direction</li>
<li><strong>xbound2</strong> – outer or right boundary in the x direction</li>
<li><strong>ybound1</strong> – inner or front boundary in the y direction</li>
<li><strong>ybound2</strong> – outer or back boundary in the y direction</li>
<li><strong>zbound1</strong> – inner or bottom boundary in the z direction</li>
<li><strong>zbound1</strong> – outer or top boundary in the z direction</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.setup_mesh">
<code class="descname">setup_mesh</code><span class="sig-paren">(</span><em>nmeshx</em>, <em>nmeshy</em>, <em>nmeshz</em>, <em>xlength</em>, <em>ylength</em>, <em>zlength</em><span class="sig-paren">)</span><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.setup_mesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the number of mesh cells in each direction, and the
length of the grid in each direction.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>nmeshx</strong> – number of mesh cells in the x direction</li>
<li><strong>nmeshy</strong> – number of mesh cells in the y direction</li>
<li><strong>nmeshz</strong> – number of mesh cells in the z direction</li>
<li><strong>xlength</strong> – total length of the grid in the x direction</li>
<li><strong>ylength</strong> – total length of the grid in the y direction</li>
<li><strong>zlength</strong> – total length of the grid in the z direction</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="grid-state">
<h2>Grid state<a class="headerlink" href="#grid-state" title="Permalink to this headline">¶</a></h2>
<p>Grid points in a hydrodynamics code have a well known, <em>minimal</em> state. This state is is defined
by a density, momentum density and energy density. The state can
be retrieved and updated with the following functions.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code></dt>
<dd><dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.get_grid_state">
<code class="descname">get_grid_state</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.get_grid_state" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">get_grid_state</span><span class="p">(</span><span class="n">int32</span> <span class="n">i</span><span class="p">,</span> <span class="n">int32</span> <span class="n">j</span><span class="p">,</span> <span class="n">int32</span> <span class="n">k</span><span class="p">,</span> <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> 
  <span class="n">float64</span> <span class="o">*</span> <span class="n">rho</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">float64</span> <span class="o">*</span> <span class="n">rhovz</span><span class="p">,</span> 
  <span class="n">float64</span> <span class="o">*</span> <span class="n">en</span><span class="p">,</span> <span class="n">int32</span> <span class="n">number_of_points</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">get_grid_state</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">rhovz</span><span class="p">,</span>  <span class="p">&amp;</span>
    <span class="n">en</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">rho</span><span class="p">,</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">rhovz</span><span class="p">,</span> <span class="n">en</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">get_grid_state</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>j</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>k</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>rho</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>rhovx</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>rhovy</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>rhovz</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>en</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </li>
<li><strong>number_of_points</strong> (<em>int32</em><em>,</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_state">
<code class="descname">set_grid_state</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_state" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">set_grid_state</span><span class="p">(</span><span class="n">int32</span> <span class="n">i</span><span class="p">,</span> <span class="n">int32</span> <span class="n">j</span><span class="p">,</span> <span class="n">int32</span> <span class="n">k</span><span class="p">,</span> <span class="n">float64</span> <span class="n">rho</span><span class="p">,</span> 
  <span class="n">float64</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">float64</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">float64</span> <span class="n">rhovz</span><span class="p">,</span> <span class="n">float64</span> <span class="n">en</span><span class="p">,</span> 
  <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">int32</span> <span class="n">number_of_points</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">set_grid_state</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">rhovz</span><span class="p">,</span> <span class="n">en</span><span class="p">,</span>  <span class="p">&amp;</span>
    <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">rho</span><span class="p">,</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">rhovz</span><span class="p">,</span> <span class="n">en</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">set_grid_state</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>j</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>k</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>rho</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>rhovx</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>rhovy</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>rhovz</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>en</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>number_of_points</strong> (<em>int32</em><em>,</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="grid-state-extension-mechanism">
<h2>Grid State, Extension Mechanism<a class="headerlink" href="#grid-state-extension-mechanism" title="Permalink to this headline">¶</a></h2>
<p>Not all information of a grid point can be transferred with the fill_grid_state and get_grid_state functions. To
support other properties (like pressure or MHD properties), the code can define <code class="docutils literal notranslate"><span class="pre">get_</span></code> and <code class="docutils literal notranslate"><span class="pre">set_</span></code> functions. These
functions must get or set one scalar property (1 argument) or a vector property (3 arguments)</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code></dt>
<dd><dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_density">
<code class="descname">set_grid_density</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_density" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">set_grid_density</span><span class="p">(</span><span class="n">int32</span> <span class="n">i</span><span class="p">,</span> <span class="n">int32</span> <span class="n">j</span><span class="p">,</span> <span class="n">int32</span> <span class="n">k</span><span class="p">,</span> <span class="n">float64</span> <span class="n">rho</span><span class="p">,</span> 
  <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">int32</span> <span class="n">number_of_points</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">set_grid_density</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">rho</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">rho</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">set_grid_density</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>j</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>k</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>rho</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>number_of_points</strong> (<em>int32</em><em>,</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_energy_density">
<code class="descname">set_grid_energy_density</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_energy_density" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">set_grid_energy_density</span><span class="p">(</span><span class="n">int32</span> <span class="n">i</span><span class="p">,</span> <span class="n">int32</span> <span class="n">j</span><span class="p">,</span> <span class="n">int32</span> <span class="n">k</span><span class="p">,</span> <span class="n">float64</span> <span class="n">en</span><span class="p">,</span> 
  <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">int32</span> <span class="n">number_of_points</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">set_grid_energy_density</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">en</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span>  <span class="p">&amp;</span>
    <span class="n">number_of_points</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">en</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">set_grid_energy_density</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>j</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>k</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>en</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>number_of_points</strong> (<em>int32</em><em>,</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_momentum_density">
<code class="descname">set_grid_momentum_density</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.set_grid_momentum_density" title="Permalink to this definition">¶</a></dt>
<dd><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">set_grid_momentum_density</span><span class="p">(</span><span class="n">int32</span> <span class="n">i</span><span class="p">,</span> <span class="n">int32</span> <span class="n">j</span><span class="p">,</span> <span class="n">int32</span> <span class="n">k</span><span class="p">,</span> 
  <span class="n">float64</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">float64</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">float64</span> <span class="n">rhovz</span><span class="p">,</span> <span class="n">int32</span> <span class="n">index_of_grid</span><span class="p">,</span> 
  <span class="n">int32</span> <span class="n">number_of_points</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">set_grid_momentum_density</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">rhovz</span><span class="p">,</span>  <span class="p">&amp;</span>
    <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span><span class="p">)</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">index_of_grid</span><span class="p">,</span> <span class="n">number_of_points</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="n">rhovx</span><span class="p">,</span> <span class="n">rhovy</span><span class="p">,</span> <span class="n">rhovz</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">set_grid_momentum_density</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>i</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>j</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>k</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>rhovx</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>rhovy</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>rhovz</strong> (<em>float64</em><em>, </em><em>IN</em>) – </li>
<li><strong>index_of_grid</strong> (<em>int32</em><em>, </em><em>IN</em>) – </li>
<li><strong>number_of_points</strong> (<em>int32</em><em>,</em>) – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="model-evolution">
<h2>Model evolution<a class="headerlink" href="#model-evolution" title="Permalink to this headline">¶</a></h2>
<p>The hydrodynamics codes evolve the properties all grid cells in time. The following functions
are needed to control the evolution in the code.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code></dt>
<dd><dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.initialize_grid">
<code class="descname">initialize_grid</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.initialize_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform accounting before evolving the model. This method will
be called after setting the parameters and filling the grid points but
just before evolving the system</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">initialize_grid</span><span class="p">();</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">initialize_grid</span><span class="p">()</span>
  <span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">initialize_grid</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="diagnostics">
<h2>Diagnostics<a class="headerlink" href="#diagnostics" title="Permalink to this headline">¶</a></h2>
<p>The state of the code can be queried, before, during and after the model calculations. The following
function can be used to query the exact model time.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code></dt>
<dd><dl class="attribute">
<dt id="amuse.community.interface.hydro.HydrodynamicsInterface.get_time">
<code class="descname">get_time</code><a class="headerlink" href="#amuse.community.interface.hydro.HydrodynamicsInterface.get_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current model time.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">int32</span> <span class="nf">get_time</span><span class="p">(</span><span class="n">float64</span> <span class="o">*</span> <span class="n">value</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">get_time</span><span class="p">(</span><span class="k">value</span><span class="p">)</span>
  <span class="kt">DOUBLE PRECISION</span> <span class="kd">::</span> <span class="k">value</span>
<span class="k">  </span><span class="kt">INTEGER</span> <span class="kd">::</span> <span class="n">get_time</span>
<span class="k">END FUNCTION</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> (<em>float64</em><em>, </em><em>OUT</em>) – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="external-fields">
<h2>External fields<a class="headerlink" href="#external-fields" title="Permalink to this headline">¶</a></h2>
<p>Some Hydrodynamics codes support external acceleration or potential fields. The following functions
can be used to enter a gravitational potential field.</p>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">amuse.community.interface.hydro.</code><code class="descname">HydrodynamicsInterface</code></dt>
<dd></dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="radiative_transfer_interface_specification.html" class="btn btn-neutral float-right" title="Radiative Transfer Interface Definition" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="stellar_evolution_interface_specification.html" class="btn btn-neutral float-left" title="Stellar Evolution Interface Definition" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2009-2019 The AMUSE Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
    <!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://stats.amusecode.org/" : "http://stats.amusecode.org/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://stats.amusecode.org/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
<!-- End Piwik Tracking Code -->

     


</body>
</html>