.. _prerequisite-label:

Installation of the prerequisite software
=========================================

Before installing AMUSE several software packages must be installed.


Requirements
~~~~~~~~~~~~

* Python (version >= 2.6)
* Numpy (version >= 1.3.0)
* HDF (version >= 1.8.3)
* h5py (version >= 1.2.0)
* MPI (OpenMPI or MPICH2)
* mpi4py (version >= 1.2)

Python
-------
Python is probably already installed on your system. To check the version of python do:

.. code-block:: sh

	> python --version
	Python 2.6.2

You can download python from `http://www.python.org`. 

Numpy
-------
To check if numpy is installed on your system do:

.. code-block:: sh

	> python -c 'import numpy; print numpy.version.version'
	1.3.0

If this fails with an error or a version before 1.3 you need to install numpy.
You can download numpy from `http://www.scipy.org/NumPy`. 

HDF5 library
------------
HDF5 is a data format specification. The HDF group provides a C library to write and access HDF files.

To check if the HDF library is installed on your system do:

.. code-block:: sh

	> h5ls -V
	h5ls: Version 1.8.3

If this fails with an error or a version before 1.8.3 you need to install the HDF library.
You can download HDF from `http://www.hdfgroup.org/`. 

h5py
----
To access HDF5 files from python we use the ``h5py`` library.

To check if the h5py library is installed on your system do:

.. code-block:: sh

	> python -c 'import h5py; print h5py.version.version'
	1.2.0

If this fails with an error or a version before 1.2.0 you need to install h5py.
You can download h5py from `http://code.google.com/p/h5py/`. 

MPI
---
The installed MPI framewor must be MPI 2 compatible. MPICH2 is a portable
implementation of the MPI 2 standard.

To check if MPICH2 is installed on your system do:

.. code-block:: sh
    
    > mpdhelp
    
    The following mpd commands are available.  For usage of any specific one,
    invoke it with the single argument --help .

    mpd           start an mpd daemon
    mpdtrace      show all mpd's in ring
    mpdboot       start a ring of daemons all at once
    mpdringtest   test how long it takes 
    ...
    
If this fails with an error you need to install MPICH2.
You can download MPICH2 from `http://www.mcs.anl.gov/research/projects/mpich2/`.

Installation scripts
~~~~~~~~~~~~~~~~~~~~

We have created a two installation scripts to automate the installation of all requirement packages on a LINUX system.
These scripts will install all packages in a user directory. These scripts install all requirements. As everything is installed in a user directory they can run even if a version of the software is already installed on your system. AMUSE will use the requirements software as installed by these scripts.


Before running the scripts you must set the ``PREFIX`` environment variable and change the path

.. code-block:: sh

	export PREFIX=~/amuse/prerequisites
	export PATH=${PREFIX}/bin:${PATH}


One script will download, build and install python on your system. The other script is written in Python and will download and install the other packages. 

To start the installation do:

.. code-block:: sh

	# 1. Open a shell

	>

	# 2. Set the PREFIX, PATH and LD_LIBRARY_PATH environment variables:

  	> export PREFIX=~/amuse/prerequisites
  	> export PATH=${PREFIX}/bin:${PATH}
  	> export LD_LIBRARY_PATH=${PREFIX}/lib:${LD_LIBRARY_PATH}

	# 3. Start the installation script for python

	> ./install-python.sh

	# 4. Start the installation script for the prerequisite packages

	> ./install.py download
  	> ./install.py install

	# 5. Update your PATH variable in your profile. 
	# Make sure the `${PREFIX}/bin` directory is the first entry in the PATH!

You should now be able to install AMUSE.

Installation on OS X
~~~~~~~~~~~~~~~~~~~~~

When installing the code on OS.X all steps are the same.The only difference is in setting the PATH variable. The PATH must be extended like this:

.. code-block:: sh

	export PATH=$PREFIX/Framework/Python.framework/Versions/2.5/bin:$PREFIX/bin:$PATH


author: Arjen van Elteren (vanelteren@strw.leidenuniv.nl)
date: 2009/09/29



